<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T-Shirt Designer</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/dragula/dist/dragula.css" />
    <script src="https://cdn.jsdelivr.net/npm/interactjs/dist/interact.js"></script>
    <style>
        body {
            margin: 0;
            font-family: 'Arial', sans-serif;
            background-color: #f8f8f8;
            background-image: url('/static/images/van\ gogh.jpg');
        }

        #container {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            gap: 20px;
            padding: 20px;
            background-color: #fff;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            border-radius: 10px;
            margin: 20px;
        }

        #color-options {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }

        .color-option {
            width: 60px;
            height: 60px;
            cursor: pointer;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid #fff;
            overflow: hidden;
            transition: transform 0.3s ease-in-out;
        }

        .color-option:hover {
            transform: scale(1.1);
        }

        #canvas-container {
            position: relative;
            width: 500px;
            height: 500px;
            border: 1px solid #ccc;
            overflow: hidden;
        }

        #tshirt {
            position: absolute;
            top: 0;
            left: 0;
            width: 500px;
            height: 500px;
            background-size: contain;
            background-repeat: no-repeat;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .design-section {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
        }

        .design-container {
            /* Styles for the design container */
            display: flex;
            flex-direction: column;
            align-items: flex-end;
        }

        .design {
            width: 100px;
            height: 100px;
            margin-bottom: 10px;
            box-sizing: content-box;
        }

        .context-menu {
            display: none;
            position: absolute;
            background-color: #fff;
            border: 1px solid #ccc;
            padding: 5px;
            z-index: 1000;
        }

        .button-container {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }

        .button-container button{
            margin: 10px;
        }

        button {
            background-color: #4caf50;
            color: #fff;
            border: none;
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            cursor: pointer;
            border-radius: 5px;
            transition: background-color 0.3s ease-in-out;
        }

        button:hover {
            background-color: orange;
        }

        .new {
            display: flex;
        }
        header {
    background-color: #333;
    padding: 30px;
    display: flex;
    align-items: center;
}

nav {
    display: flex;
    align-items: center;
}

nav img {
    margin-right: 20px; /* Add some margin to the right of the image */
}

nav a {
    color: #fff;
    text-decoration: none;
    margin-right: 20px; /* Add some margin between the navigation links */
    margin-left: 250px;
}

nav a:hover {
    color: orange;
}

.bdy {
    margin-left: 290px;
}

        .sizes p{
            border: 2px solid black;
            padding: 8px 15px;
            cursor: pointer;
            border-radius: 20px;
        }

        .sizes p:hover{
            background-color: orange;
        }

        .btn{
            background-color: transparent;
        }
        nav ul{
            margin-left: 20px;
            display: flex;
        }

        .popup-container {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: #fff;
        padding: 20px;
        border: 1px solid #ccc;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        z-index: 1000;
    }

    .popup-content {
        text-align: center;
    }

    .close {
        position: absolute;
        top: 10px;
        right: 10px;
        cursor: pointer;
        font-size: 20px;
        color: #555;
    }

    .close:hover {
        color: red;
    }

    .popup-container {
    display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: #fff;
    padding: 20px;
    border: 1px solid #ccc;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
    z-index: 1000;
    touch-action: manipulation; /* Add this line */
}

.design-grid{
    display: grid;
    grid-template-columns: 1fr 1fr; /* This creates 2 columns of equal width */
    grid-gap: 20px;
}

    </style>
</head>

<body>
    <header>
        <nav>
            <img src="/static/images/logo.jpg" alt="logo" width="50px" height="50px">
            <a href="/shop">Shop</a>
            <a href="{{ url_for('get_purchased_products', user_id=session['user_id']) }}">My Purchases</a>
            <a href="{{ url_for('get_saved_screenshots', user_id=session['user_id']) }}">My Designs</a>
            <a href="/logout">Log Out </a>
        </nav>
    </header>

    <div class="bdy">
    <div class="new">
        <div id="color-options">
            <h2>Color-Options</h2>
            <div>
            <button data-color-option="White" onclick="changeShirtColor('/static/images/wt.jpeg', 'White')" class="btn"><img src="/static/images/wt.jpeg" alt="White T-Shirt" width="60px" height="60px"></button>
            <button data-color-option="Black" onclick="changeShirtColor('/static/images/blt.jpeg', 'Black')" class="btn"><img src="/static/images/blt.jpeg" alt="Black T-Shirt" width="60px" height="60px"></button>
            <!-- Add more color options as needed -->
        </div>
            <div>
                <h2>Sizes</h2>
                <div class="sizes">
                <p>Small</p>
                <p>Medium</p>
                <p>Large</p>
                <p>XL</p>
                <p>XXL</p>
            </div>
        </div>
        </div>

        <div id="container">
            <div id="canvas-container">
                <canvas id="tshirt" width="5000" height="500"></canvas>
            </div>
        </div>

        <div class="design-container" id="design-container">
            <div class="design-section">
                <h2>Designs</h2>
            <!-- Add drag-and-drop designs here -->
            <div class="design-grid">
            <textarea id="textbox" rows="4" cols="50" class="design" placeholder="Enter Text..."></textarea>
            <img class="design" src="/static/images/d1.jpeg" alt="Design 1" width="100px" height="100px">
            <img class="design" src="/static/images/d2.jpg" alt="Design 2" width="100px" height="100px">
            <img class="design" src="/static/images/Ye.jpg" alt="Design 2" width="100px" height="100px">
            <img class="design" src="/static/images/Indicud.jpg" alt="Design 2" width="100px" height="100px">
            <img class="design" src="/static/images/art1.jpg" alt="Design 2" width="100px" height="100px">
            <img class="design" src="/static/images/art2.webp" alt="Design 2" width="100px" height="100px">
            <img class="design" src="/static/images/Grad.jpg" alt="Design 2" width="100px" height="100px">

            </div>
            </div>
        </div>
    </div>

    <div id="purchasePopup" class="popup-container">
        <div class="popup-content">
            <!-- Inside the popup-content div -->
<div id="selectedColorDisplay" style="width: 30px; height: 30px; border: 1px solid #ccc; margin-top: 5px;"></div>

            <span class="close" onclick="closePurchasePopup()">&times;</span>
            <form id="emailForm">
                <label for="userEmailInput">Enter your email:</label>
                <input type="email" id="userEmailInput" required>
                <input type="hidden" id="size">
                <!-- Inside the popup-content div -->
                <label for="colorPicker">Select Color:</label>
                <input type="color" id="colorPicker" value="#ffffff" onchange="updateSelectedColor(this.value)">
                <button type="button" onclick="initiatePayment()">Continue to Purchase</button>
            </form>
        </div>
    </div>

    <div class="button-container">
        <button onclick="saveCustomDesign()" type="button">Save Custom Design</button>
        <button onclick="showPurchasePopup()" type="button">Purchase</button>
    </div>

    <!-- Add this markup to your HTML file -->
    <div id="textOptionsPopup" class="popup-container">
        <div class="popup-content">
            <span class="close" onclick="closeTextOptionsPopup()">&times;</span>
            <label for="fontSelect">Font:</label>
            <select id="fontSelect">
                <option value="Arial">Arial</option>
                <option value="Verdana">Verdana</option>
                <option value="times"></option>
                <!-- Add more font options as needed -->
            </select>
            <label for="boldCheckbox">Bold:</label>
            <input type="checkbox" id="boldCheckbox" onchange="toggleBold()">
            <input type="color" id="textColorInput" onchange="changeTextColor(this.value)">
        </div>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/dragula/dist/dragula.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dom-to-image/2.6.0/dom-to-image.min.js"></script>
    <script src="https://js.paystack.co/v1/inline.js"></script>


    <script>

        let selectedDesign;

        function changeShirtColor(imagePath, colorLabel) {
            const tshirt = document.getElementById("tshirt");

            if (imagePath && imagePath.trim() !== '' && colorLabel && colorLabel.trim() !== '') {
                tshirt.style.backgroundImage = `url('${imagePath}')`;
            } else {
                console.error('Invalid image path or color label:', imagePath, colorLabel);
                tshirt.style.backgroundImage = "url('/static/images/wt.jpeg')";
                tshirt.style.backgroundColor = '#ffffff';
            }
        }

        function saveCustomDesign() {
            const tshirtContainer = document.getElementById('canvas-container');

            // Use dom-to-image to capture the content of the canvas container
            domtoimage.toPng(tshirtContainer)
                .then(dataUrl => {
                    // Send dataUrl to the server using Fetch API
                    fetch('/save_canvas', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            canvas_content: dataUrl,
                        }),
                    })
                    .then(response => response.json())
                    .then(data => {
                        console.log('Server response:', data);
                        // Optionally handle the response from the server

                        // Redirect
                        window.location.href = `/display/${data.filename}`;
                    })
                    .catch(error => {
                        console.error('Error sending data to the server:', error);
                    });
                })
                .catch(error => {
                    console.error('Error capturing canvas content:', error);
                });
        }



        document.addEventListener("DOMContentLoaded", function () {
            const designContainer = document.getElementById('design-container');
            const tshirtContainer = document.getElementById('canvas-container');

            // Add drag and drop events for designs
            designContainer.addEventListener('dragstart', function (event) {
                event.dataTransfer.setData('text/plain', ''); // Required for Firefox
                selectedDesign = event.target;
            });

            tshirtContainer.addEventListener('dragover', function (event) {
                event.preventDefault();
            });

            tshirtContainer.addEventListener('drop', function (event) {
                event.preventDefault();

                if (selectedDesign) {
                    // Get the bounding rectangle of the T-shirt canvas
                    const tshirtRect = tshirtContainer.getBoundingClientRect();

                    // Calculate the position relative to the T-shirt canvas
                    const offsetX = event.clientX - tshirtRect.left;
                    const offsetY = event.clientY - tshirtRect.top;

                    // Clone the original design and append it to the T-shirt container
                    const newDesign = selectedDesign.cloneNode(true);
                    newDesign.classList.remove('design');
                    tshirtContainer.appendChild(newDesign);

                    // Update the position of the new design element
                    newDesign.style.position = 'absolute';
                    newDesign.style.left = offsetX - newDesign.width / 2 + 'px';
                    newDesign.style.top = offsetY - newDesign.height / 2 + 'px';

                    // Make the new design resizable and draggable only after dropping
                    makeDesignResizable(newDesign);
                    makeDesignDraggable(newDesign);

                    selectedDesign = null;
                }
            });

            function makeDesignResizable(element) {
                interact(element).resizable({
                    edges: { left: true, right: true, top: true, bottom: true },
                    listeners: {
                        move(event) {
                            const target = event.target;

                            // Resize the element
                            target.style.width = event.rect.width + 'px';
                            target.style.height = event.rect.height + 'px';
                        }
                    }
                })
                    .on('resizemove', function (event) {
                        const target = event.target;

                        // Check if the target is the clone, and prevent the default action if true
                        if (event.rect.width !== event.deltaRect.width || event.rect.height !== event.deltaRect.height) {
                            event.preventDefault();
                        }
                    });
            }

            function makeDesignDraggable(element) {
                interact(element).draggable({
                    listeners: {
                        move(event) {
                            const target = event.target;

                            // Translate the element
                            target.style.webkitTransform = target.style.transform = 'translate(' + event.dx + 'px, ' + event.dy + 'px)';
                        }
                    }
                })
                    .on('dragmove', function (event) {
                        const target = event.target;

                        // Check if the target is the clone, and prevent the default action if true
                        if (event.rect.width !== event.deltaRect.width || event.rect.height !== event.deltaRect.height) {
                            event.preventDefault();
                        }
                    });
            }

            function createTextClone(text) {
        const newText = document.createElement('div');
        newText.textContent = text;
        newText.classList.add('text-clone');
        newText.style.position = 'absolute';
        newText.style.top = '50%'; // Adjust position as needed
        newText.style.left = '50%'; // Adjust position as needed
        newText.style.transform = 'translate(-50%, -50%)'; // Center the text

        // Make the text clone draggable and resizable using interact.js
        interact(newText).draggable({
            listeners: {
                move(event) {
                    const target = event.target;
                    const x = (parseFloat(target.getAttribute('data-x')) || 0) + event.dx;
                    const y = (parseFloat(target.getAttribute('data-y')) || 0) + event.dy;

                    // Translate the element
                    target.style.webkitTransform = target.style.transform = `translate(${x}px, ${y}px)`;

                    // Update the element's position attributes
                    target.setAttribute('data-x', x);
                    target.setAttribute('data-y', y);
                }
            }
        }).resizable({
            edges: { left: true, right: true, top: true, bottom: true },
            listeners: {
                move(event) {
                    const target = event.target;
                    const x = (parseFloat(target.getAttribute('data-x')) || 0);
                    const y = (parseFloat(target.getAttribute('data-y')) || 0);

                    // Resize the element
                    target.style.width = event.rect.width + 'px';
                    target.style.height = event.rect.height + 'px';

                    // Translate the element to adjust for resizing from the top or left
                    target.style.transform = `translate(${x}px, ${y}px)`;

                    // Update the font size based on the resize
                    const fontSize = Math.min(event.rect.width, event.rect.height) * 0.8; // Adjust this factor as needed
                    target.style.fontSize = fontSize + 'px';
                }
            }
        });

        // Append a link for editing text
    const editLink = document.createElement('a');
    editLink.textContent = 'Edit Text';
    editLink.href = '#'; // Set href to "#" as a placeholder
    editLink.onclick = function() {
        showTextOptionsPopup(newText); // Call function to show popup for text editing
        return false; // Prevent default link behavior
    };
    newText.appendChild(editLink);

    newText.addEventListener('mouseenter', function() {
        editLink.style.display = 'inline'; // Show the link on mouse enter
    });

    newText.addEventListener('mouseleave', function() {
        editLink.style.display = 'none'; // Hide the link on mouse leave
    });

        tshirtContainer.appendChild(newText);
    }

    // Event listener for text input
    const textBox = document.getElementById('textbox');
    textBox.addEventListener('input', function () {
        const text = textBox.value;
        // Remove any existing text clones on the canvas
        const existingTextClones = document.querySelectorAll('.text-clone');
        existingTextClones.forEach(clone => clone.remove());
        // Create a new text clone with the entered text
        createTextClone(text);
    });

    // Function to handle font change
    function changeFont(font) {
        const textClones = document.querySelectorAll('.text-clone');
        textClones.forEach(clone => {
            clone.style.fontFamily = font;
        });
    }

    // Function to handle text color change
    function changeTextColor(color) {
        const textClones = document.querySelectorAll('.text-clone');
        textClones.forEach(clone => {
            clone.style.color = color;
        });
    }

    // Function to handle bold text
    function toggleBold() {
        const textClones = document.querySelectorAll('.text-clone');
        textClones.forEach(clone => {
            clone.style.fontWeight = clone.style.fontWeight === 'bold' ? 'normal' : 'bold';
        });
    }

    // Event listeners for font, text color, and bold change
    const fontSelect = document.getElementById('font-select');
    const textColorInput = document.getElementById('text-color-input');
    const boldButton = document.getElementById('bold-button');

    fontSelect.addEventListener('change', function () {
        changeFont(this.value);
    });

    textColorInput.addEventListener('input', function () {
        changeTextColor(this.value);
    });

    boldButton.addEventListener('click', function () {
        toggleBold();
    });

    // Add dragstart event listener to the text box
    textBox.addEventListener('dragstart', function (event) {
        event.dataTransfer.setData('text/plain', ''); // Required for Firefox
        selectedText = event.target;
    });

    // Add dragover event listener to the tshirt container
    tshirtContainer.addEventListener('dragover', function (event) {
        event.preventDefault();
    });

    // Add drop event listener to the tshirt container
    tshirtContainer.addEventListener('drop', function (event) {
        event.preventDefault();

        if (selectedText) {
            // Get the bounding rectangle of the T-shirt canvas
            const tshirtRect = tshirtContainer.getBoundingClientRect();

            // Calculate the position relative to the T-shirt canvas
            const offsetX = event.clientX - tshirtRect.left;
            const offsetY = event.clientY - tshirtRect.top;

            // Clone the original text box and append it to the T-shirt container
            const newText = selectedText.cloneNode(true);
            newText.removeAttribute('id'); // Remove id to prevent duplication
            newText.classList.remove('text-clone');
            tshirtContainer.appendChild(newText);

            // Update the position of the new text element
            newText.style.position = 'absolute';
            newText.style.left = offsetX + 'px';
            newText.style.top = offsetY + 'px';

            selectedText = null;
        }
    });

        });


        //payment script
        //Email popup script
        function showPurchasePopup() {
        const purchasePopup = document.getElementById('purchasePopup');
        purchasePopup.style.display = 'block';
    }

    function closePurchasePopup() {
        const purchasePopup = document.getElementById('purchasePopup');
        purchasePopup.style.display = 'none';
    }

    function getUserEmail() {
        const userEmailInput = document.getElementById('userEmailInput');
        return userEmailInput.value;
    }

    // Function to get the selected size
function getSelectedSize() {
    const sizeButtons = document.querySelectorAll('.sizes p');
    for (const button of sizeButtons) {
        if (button.classList.contains('selected')) {
            return button.innerText;
        }
    }
    // Return a default size or handle the case where no size is selected
    return 'Medium';
}


// Function to handle size button click
function handleSizeButtonClick(button) {
    const sizeButtons = document.querySelectorAll('.sizes p');
    for (const sizeButton of sizeButtons) {
        sizeButton.classList.remove('selected');
    }
    button.classList.add('selected');
}

// Attach event listeners to size buttons
const sizeButtons = document.querySelectorAll('.sizes p');
for (const sizeButton of sizeButtons) {
    sizeButton.addEventListener('click', function () {
        handleSizeButtonClick(this);
    });}

       // Function to capture the canvas screenshot
function captureCanvasScreenshot() {
    const canvasContainer = document.getElementById('canvas-container');

    return domtoimage.toPng(canvasContainer)
        .then(dataUrl => {
            return dataUrl;
        })
        .catch(error => {
            console.error('Error capturing canvas content:', error);
            return null;
        });
}

// Modified initiatePayment function
// Function to get the selected color from the color picker
function getSelectedColor() {
    const colorPicker = document.getElementById('colorPicker');
    return colorPicker.value;
}

// Modified initiatePayment function
function initiatePayment() {
    const userEmail = getUserEmail();
    const selectedSize = getSelectedSize();
    const selectedColor = getSelectedColor();

    if (selectedColor) {
        // Capture canvas screenshot before initiating payment
        captureCanvasScreenshot().then(screenshotUrl => {
            const imageUrl = getSelectedImageUrl();

            const publicKey = 'pk_test_72adfba481a29bf8d587280ca7d96002ac4210c4';
            const amountInKobo = 1500 * 100;

            const handler = PaystackPop.setup({
                key: publicKey,
                email: userEmail,
                amount: amountInKobo,
                currency: 'KES',
                ref: 'pay_' + Date.now(),
                callback: function (response) {
                    console.log('Payment successful. Transaction reference: ' + response.reference);

                    // Save purchased product details to the server
                    savePurchasedProduct(userEmail, selectedSize, selectedColor, imageUrl, screenshotUrl);

                    showPurchasePopup();
                },
                onClose: function () {
                    console.log('Payment closed without completing.');
                }
            });

            handler.openIframe();
        });
    } else {
        console.error('Color option not selected');
    }
}

    // Function to update the selected color
function updateSelectedColor(color) {
    const selectedColorDisplay = document.getElementById('selectedColorDisplay');
    selectedColorDisplay.style.backgroundColor = color;
}

// Function to save purchased product details
// Function to save purchased product details
function savePurchasedProduct(userEmail, size, colorOption, imageUrl, screenshotUrl) {
    const colorCode = getSelectedColor();
    // Send data to the server using Fetch API
    fetch('/save_purchased_product', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({
            user_email: userEmail,
            size: size,
            color_option: colorOption,
            color_code: colorCode,
            image_url: imageUrl,
            screenshot_url: screenshotUrl,
            price: 1500, // Assuming a fixed price for the T-shirt
        }),
    })
    .then(response => response.json())
    .then(data => {
        console.log('Server response:', data);
        if (data.status === 'success') {
            // Redirect to display2 page with the product ID
            window.location.href = `/display2/${data.product_id}`;  // Assuming your response includes the product_id
        } else {
            console.error('Error saving purchased product details:', data.message);
        }
    })
    .catch(error => {
        console.error('Error sending data to the server:', error);
    });
}


// Function to get the selected image URL
function getSelectedImageUrl() {
    const tshirt = document.getElementById('tshirt');
    const backgroundImage = window.getComputedStyle(tshirt).backgroundImage;

    // Extract the URL from the 'url("...")' string
    const imageUrl = backgroundImage.slice(5, -2);

    return imageUrl;
}



// Inside showPopupForText function

// Get font select, bold checkbox, and text color input elements
const fontSelect = document.getElementById('fontSelect');
const boldCheckbox = document.getElementById('boldCheckbox');
const textColorInput = document.getElementById('textColorInput');

// Add event listeners to font select, bold checkbox, and text color input
fontSelect.addEventListener('change', function() {
    changeFont(this.value); // Call changeFont function when font is changed
});

boldCheckbox.addEventListener('change', function() {
    toggleBold(); // Call toggleBold function when bold checkbox is toggled
});

textColorInput.addEventListener('input', function() {
    changeTextColor(this.value); // Call changeTextColor function when text color is changed
});

// Function to handle font change
function changeFont(font) {
    const selectedText = document.querySelector('.text-clone');
    if (selectedText) {
        selectedText.style.fontFamily = font;
    }
}

// Function to handle toggling bold
function toggleBold() {
    const selectedText = document.querySelector('.text-clone');
    if (selectedText) {
        selectedText.style.fontWeight = selectedText.style.fontWeight === 'bold' ? 'normal' : 'bold';
    }
}

// Function to handle text color change
function changeTextColor(color) {
    const selectedText = document.querySelector('.text-clone');
    if (selectedText) {
        selectedText.style.color = color;
    }
}


// Function to handle bending text (example)
// Function to bend the text
// Function to bend the text
function bendText() {
    const selectedText = document.querySelector('.text-clone');
    if (!selectedText) return;

    // Get the text content
    const text = selectedText.textContent;
    const length = text.length;

    // Calculate the angle increment for distributing characters along the semi-circle
    const angleIncrement = Math.PI / (length + 1);

    // Initial angle
    let angle = Math.PI / 2 - angleIncrement; // Start from the top

    // Radius of the semi-circle
    const radius = 100; // Adjust as needed

    // Set the text to be transparent
    selectedText.style.opacity = '0';

    // Iterate over each character, position them along the semi-circle
    for (let i = 0; i < length; i++) {
        const character = text[i];
        const span = document.createElement('span');
        span.textContent = character;

        // Calculate the position along the semi-circle using polar coordinates
        const x = Math.cos(angle) * radius;
        const y = Math.sin(angle) * radius;

        // Apply positioning and rotation
        span.style.position = 'absolute';
        span.style.left = `${50 + x}px`; // Center horizontally
        span.style.top = `${150 + y}px`; // Adjust vertical position as needed
        const rotation = angle - Math.PI / 2; // Reverse rotation direction
        span.style.transform = `rotate(${rotation}rad)`;

        // Append the span to the original text
        selectedText.appendChild(span);

        // Increment angle for the next character
        angle -= angleIncrement; // Decrease angle for downward curve
    }
}






// Function to show the text options popup
function showTextOptionsPopup() {
    console.log('Showing popup...');
    const textOptionsPopup = document.getElementById('textOptionsPopup');
    textOptionsPopup.style.display = 'block';
}

// Function to close the text options popup
function closeTextOptionsPopup() {
    console.log('Closing popup...');
    const textOptionsPopup = document.getElementById('textOptionsPopup');
    textOptionsPopup.style.display = 'none';
}




    </script>
</div>
</body>

</html>